
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Nai Bahu Restaurant & Banquets</title>

    <!-- PWA Manifest & Meta -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#A40046">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="Logo2.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts - Playfair Display and Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            width: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #A40046;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.07'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: white;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            position: relative;
        }

        .royal-font {
            font-family: 'Playfair Display', serif;
        }
        
        /* Splash Screen Animations */
        @keyframes splash-enter {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .splash-enter-active {
            animation: splash-enter 1s ease-in-out forwards;
        }

        @keyframes blur-to-visible {
            0% {
                opacity: 0;
                filter: blur(10px);
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                filter: blur(0);
                transform: scale(1);
            }
        }
        .logo-animation {
            animation: blur-to-visible 1.5s forwards;
        }

        /* Cart Scrollbar */
        .cart-items-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .cart-items-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }
        .cart-items-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        /* Category Modal Animations */
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes scale-up {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
        .animate-scale-up {
            animation: scale-up 0.3s ease-out forwards;
        }

        /* Item Detail Modal Animation */
        .animate-modal-fade-in {
             animation: fade-in 0.3s ease-out forwards;
        }
        .animate-modal-scale-up {
            animation: scale-up 0.3s ease-out forwards;
        }

        /* Add To Cart Notification Animation */
        @keyframes slide-down-fade-out {
            0% {
                opacity: 0;
                transform: translateY(-100%);
            }
            15%, 85% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100%);
            }
        }
        .animate-notification {
            animation: slide-down-fade-out 3s ease-in-out forwards;
        }
        
        /* Button Press Feedback */
        .add-to-cart-btn, #send-order-btn, #floating-category-btn, #floating-cart-btn, #perform-search-btn, #clear-search-input-btn, #install-app-btn, #favorites-btn {
            transition: transform 0.1s ease-out;
        }
        .add-to-cart-btn:active, #send-order-btn:active, #floating-category-btn:active, #floating-cart-btn:active, #perform-search-btn:active, #clear-search-input-btn:active, #install-app-btn:active, #favorites-btn:active {
            transform: scale(0.95);
        }

        /* Cart Item Entry Animation */
        @keyframes fade-in-slide-right {
            from { opacity: 0; transform: translateX(-15px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .cart-item-enter {
            animation: fade-in-slide-right 0.4s ease-out forwards;
        }

        /* Category Slider Styling & Animations */
        .category-slider-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari and Opera */
        }
        .category-slider-container {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
            scroll-snap-type: x mandatory; /* Makes scrolling feel polished */
        }
        .category-slider-item {
            scroll-snap-align: start; /* Aligns items to the start on scroll */
            opacity: 0; /* Start hidden for animation */
            transform: translateY(30px) scale(0.95); /* Start lower and smaller for a 'pop' effect */
            transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .category-slider-item.is-visible {
            opacity: 1; /* Fade in */
            transform: translateY(0) scale(1); /* Slide up and scale to full size */
            transition-property: transform, box-shadow; /* Only transition these on hover */
            transition-duration: 0.3s;
            transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .category-slider-item.is-visible:hover {
            transform: scale(1.08) rotate(2deg); /* A more dynamic scale and slight rotation */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 0 25px rgba(164, 0, 70, 0.5); /* Add a pink glow */
        }
        .category-slider-item h4 {
            transition: transform 0.3s ease-out, text-shadow 0.3s ease-out;
        }
        .category-slider-item.is-visible:hover h4 {
            transform: translateY(-4px); /* Make text pop up a bit */
            text-shadow: 0 2px 4px rgba(0,0,0,0.5); /* Add shadow to text for readability */
        }
        
        /* Favorite Button Animation */
        .favorite-toggle-btn:active {
            transform: scale(0.9);
        }
        
    </style>
</head>

<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <script type="module">
        // --- PWA Service Worker Registration ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    }, err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // --- Global PWA Install Prompt Event ---
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            // Update UI notify the user they can install the PWA
            if (typeof state !== 'undefined') {
                state.isInstallable = true;
                renderApp();
            }
        });

        window.addEventListener('appinstalled', (evt) => {
            // Log install to analytics
            console.log('INSTALL: Success');
            if (typeof state !== 'undefined') {
                state.isInstallable = false;
                renderApp();
            }
        });

        // --- CONSTANTS ---
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwr1_9lc-dqmQMLOsrZyur1lGSP19bR3loVGQU0-ZM4f0XTILJ9UYWHqy9zHwpPLwmEEg/exec';
        
        // To add more tables, change the line below, for example: const TABLE_NUMBERS = [1, 2, 3, 4, 5];
        const TABLE_NUMBERS = [1];

        const MENU = [
            // SOUP
            { id: 1, name: 'Manchow Soup', price: 100, description: 'A popular hot and spicy Indo-Chinese soup, packed with finely chopped vegetables.', image: 'Manchow Soup.webp', category: 'Soup', searchTerms: ['manchow', 'soup', 'veg', 'spicy'] },
            { id: 2, name: 'Hot & Sour Soup', price: 100, description: 'A tangy and spicy soup made with mixed vegetables, vinegar, soy sauce, and aromatic seasonings.', image: 'Hot & Sour Soup.webp', category: 'Soup', searchTerms: ['hot', 'sour', 'soup', 'veg', 'spicy'] },
            { id: 3, name: 'Manchurian Soup', price: 120, description: 'A flavorful Indo-Chinese soup with vegetable manchurian balls simmered in a spicy and tangy broth.', image: 'Manchurian Soup.webp', category: 'Soup', searchTerms: ['manchurian', 'soup', 'veg', 'chinese'] },
            { id: 4, name: 'Lemon Corriander Soup', price: 100, description: 'A light and refreshing soup flavored with lemon juice, fresh coriander, and assorted vegetables.', image: 'Lemon Corriander Soup.webp', category: 'Soup', searchTerms: ['lemon', 'coriander', 'soup', 'veg', 'healthy'] },
            
            // BBQ
            { id: 5, name: 'Paneer Tikka', price: 250, description: 'Cubes of paneer marinated in spices and grilled in a tandoor. A classic vegetarian appetizer.', image: 'Paneer Tikka.webp', category: 'BBQ', searchTerms: ['paneer', 'tikka', 'bbq', 'tandoori', 'starter'] },
            { id: 6, name: 'Malai Tikka', price: 270, description: 'Creamy and mild paneer tikka marinated in a rich blend of cream, cheese, and cashew paste.', image: 'Malai Tikka.webp', category: 'BBQ', searchTerms: ['malai', 'tikka', 'paneer', 'bbq', 'starter', 'creamy'] },
            { id: 7, name: 'Afgani Tikka', price: 260, description: 'Paneer cubes marinated in a special Afghani-style blend of yogurt, cream, and aromatic spices.', image: 'Afgani Tikka.webp', category: 'BBQ', searchTerms: ['afgani', 'tikka', 'paneer', 'bbq', 'starter'] },
            { id: 8, name: 'Aachari Tikka', price: 250, description: 'A tangy and spicy paneer tikka flavored with Indian pickle spices for a unique taste.', image: 'Aachari Tikka.webp', category: 'BBQ', searchTerms: ['aachari', 'tikka', 'paneer', 'bbq', 'starter', 'spicy'] },
            { id: 9, name: 'Sez - Tikka', price: 250, description: 'Sizzling hot paneer tikka served on a hot plate, creating a dramatic and flavorful experience.', image: 'Sez - Tikka.webp', category: 'BBQ', searchTerms: ['sez', 'sizzling', 'tikka', 'paneer', 'bbq', 'starter'] },
            { id: 10, name: 'Kali Mari Tikka', price: 250, description: 'Paneer tikka flavored with a generous amount of freshly ground black pepper for a pungent kick.', image: 'Kali Mari Tikka.webp', category: 'BBQ', searchTerms: ['kali mari', 'black pepper', 'tikka', 'paneer', 'bbq', 'starter', 'spicy'] },
            
            // CHAAP
            { id: 11, name: 'Masala Chaap', price: 240, description: 'Soya chaap marinated in a spicy masala blend and cooked to perfection in a tandoor.', image: 'Masala Chaap.webp', category: 'Chaap', searchTerms: ['masala', 'chaap', 'soya', 'starter', 'tandoori'] },
            { id: 12, name: 'Lasaniya Chaap', price: 250, description: 'Tender soya chaap cooked in a rich and pungent garlic-flavored gravy.', image: 'Lasaniya Chaap.webp', category: 'Chaap', searchTerms: ['lasaniya', 'garlic', 'chaap', 'soya', 'starter'] },
            { id: 13, name: 'Aachari Chaap', price: 230, description: 'Soya chaap pieces marinated in pickling spices for a tangy and spicy flavor profile.', image: 'Aachari Chaap.webp', category: 'Chaap', searchTerms: ['aachari', 'chaap', 'soya', 'starter', 'spicy'] },
            { id: 14, name: 'Sez Chaap', price: 270, description: 'Delicious soya chaap served on a sizzling hot plate for a theatrical presentation.', image: 'Sez Chaap.webp', category: 'Chaap', searchTerms: ['sez', 'sizzling', 'chaap', 'soya', 'starter'] },
            { id: 15, name: 'Irani Chaap', price: 270, description: 'Soya chaap prepared in a special Irani-style marinade for a unique, aromatic taste.', image: 'Irani Chaap.webp', category: 'Chaap', searchTerms: ['irani', 'chaap', 'soya', 'starter'] },
            { id: 16, name: 'Malai Chaap', price: 280, description: 'Tender soya chaap marinated in a creamy and rich malai mixture, grilled until golden.', image: 'Malai Chaap.webp', category: 'Chaap', searchTerms: ['malai', 'chaap', 'soya', 'starter', 'creamy'] },
            { id: 17, name: 'Afgani Chaap', price: 250, description: 'Soya chaap marinated in a mild, creamy blend of yogurt, cream, and spices, inspired by Afghani cuisine.', image: 'Afgani Chaap.webp', category: 'Chaap', searchTerms: ['afgani', 'chaap', 'soya', 'starter'] },
            { id: 18, name: 'Reshmi Chaap', price: 240, description: 'Silky smooth soya chaap cooked with a rich marinade of cashews, cream, and mild spices.', image: 'Reshmi Chaap.webp', category: 'Chaap', searchTerms: ['reshmi', 'chaap', 'soya', 'starter', 'silky'] },
            { id: 19, name: 'Khalifa Chaap', price: 240, description: 'A special house preparation of soya chaap, rich in flavor and spices.', image: 'Khalifa Chaap.webp', category: 'Chaap', searchTerms: ['khalifa', 'chaap', 'soya', 'starter', 'special'] },

            // MOMOS
            { id: 20, name: 'Fry Momos', price: 150, description: 'Classic vegetable-filled dumplings, steamed and then fried until golden and crispy.', image: 'Fry Momos.webp', category: 'Momos', searchTerms: ['momos', 'fried', 'dumplings', 'starter', 'chinese'] },
            { id: 21, name: 'Tandoori Momos', price: 200, description: 'A fusion delight where steamed momos are marinated in tandoori spices and grilled.', image: 'Tandoori Momos.webp', category: 'Momos', searchTerms: ['momos', 'tandoori', 'dumplings', 'starter', 'fusion'] },
            { id: 22, name: 'Fry Cheese Momos', price: 180, description: 'Crispy fried dumplings with a delightful filling of cheese and vegetables.', image: 'Fry Cheese Momos.webp', category: 'Momos', searchTerms: ['momos', 'cheese', 'fried', 'dumplings', 'starter'] },
            { id: 23, name: 'Cheese Tandoori Momos', price: 220, description: 'An indulgent fusion of cheesy momos marinated and cooked in a tandoor.', image: 'Cheese Tandoori Momos.webp', category: 'Momos', searchTerms: ['momos', 'cheese', 'tandoori', 'dumplings', 'starter'] },

            // PASTA
            { id: 24, name: 'Red Sauce Pasta', price: 250, description: 'Pasta tossed in a classic, tangy tomato and herb sauce, a timeless Italian favorite.', image: 'Red Sauce Pasta.webp', category: 'Pasta', searchTerms: ['pasta', 'red sauce', 'arrabbiata', 'italian'] },
            { id: 25, name: 'White Sauce Pasta', price: 250, description: 'Creamy and rich pasta made with a smooth white sauce (b√©chamel) and assorted vegetables.', image: 'White Sauce Pasta.webp', category: 'Pasta', searchTerms: ['pasta', 'white sauce', 'alfredo', 'italian', 'creamy'] },
            { id: 26, name: 'Pink Sauce Pasta', price: 270, description: 'A delicious blend of red and white sauces, creating a perfectly balanced, creamy tomato flavor.', image: 'Pink Sauce Pasta.webp', category: 'Pasta', searchTerms: ['pasta', 'pink sauce', 'rose', 'italian'] },
            
            // PAV BHAJI
            { id: 27, name: 'Pav Bhaji', price: 100, description: 'A flavorful mash of mixed vegetables in a special blend of spices, served with soft, buttered pav.', image: 'Pav Bhaji.webp', category: 'Pav Bhaji', searchTerms: ['pav', 'bhaji', 'mumbai', 'street food'] },
            { id: 28, name: 'Butter Pav Bhaji', price: 120, description: 'The classic pav bhaji, made even richer with an extra helping of butter.', image: 'Butter Pav Bhaji.webp', category: 'Pav Bhaji', searchTerms: ['butter', 'pav', 'bhaji', 'mumbai', 'street food'] },
            { id: 29, name: 'Cheese Pav Bhaji', price: 150, description: 'Classic pav bhaji made irresistible with a generous topping of melted cheese.', image: 'Cheese Pav Bhaji.webp', category: 'Pav Bhaji', searchTerms: ['cheese', 'pav', 'bhaji', 'mumbai', 'street food'] },
            { id: 30, name: 'Paneer Pav Bhaji', price: 150, description: 'A delicious variation of pav bhaji with added cubes of soft paneer.', image: 'Paneer Pav Bhaji.webp', category: 'Pav Bhaji', searchTerms: ['paneer', 'pav', 'bhaji', 'mumbai', 'street food'] },
            { id: 31, name: 'Ex Bun', price: 10, description: 'An extra buttered pav (bun) to go with your bhaji.', image: 'Ex Bun.webp', category: 'Pav Bhaji', searchTerms: ['extra', 'bun', 'pav'] },

            // CHHOLE SPECIAL
            { id: 32, name: 'Chhole Bhature', price: 160, description: 'A classic North Indian dish of spicy chickpea curry served with soft, fluffy fried bread.', image: 'Chhole Bhature.webp', category: 'Chhole Special', searchTerms: ['chhole', 'bhature', 'punjabi', 'main course', 'chickpea'] },
            { id: 33, name: 'Chhole Kulcha', price: 200, description: 'Spicy chickpea curry served with soft, leavened bread baked in a tandoor.', image: 'Chhole Kulcha.webp', category: 'Chhole Special', searchTerms: ['chhole', 'kulcha', 'punjabi', 'main course'] },
            { id: 34, name: 'Chhole Masala', price: 180, description: 'A flavorful and spicy chickpea curry, perfect to be paired with rice or bread.', image: 'Chhole Masala.webp', category: 'Chhole Special', searchTerms: ['chhole', 'masala', 'punjabi', 'curry'] },
            { id: 35, name: 'Cheese Chhole Masala', price: 200, description: 'Our classic chhole masala made richer with a topping of grated cheese.', image: 'Cheese Chhole Masala.webp', category: 'Chhole Special', searchTerms: ['cheese', 'chhole', 'masala', 'punjabi', 'curry'] },
            { id: 36, name: 'Chhole Paneer Masala', price: 220, description: 'A hearty combination of chickpeas and paneer in a spicy onion-tomato gravy.', image: 'Chhole Paneer Masala.webp', category: 'Chhole Special', searchTerms: ['paneer', 'chhole', 'masala', 'punjabi', 'curry'] },
            { id: 37, name: 'Sizzling Chhole Bhature / Kulcha', price: 250, description: 'A spectacular presentation of chhole served with your choice of bhature or kulcha on a sizzling platter.', image: 'Sizzling Chhole Bhature.webp', category: 'Chhole Special', searchTerms: ['sizzling', 'chhole', 'bhature', 'kulcha'] },

            // CHINESE DRY & GRAVY SPECIAL
            { id: 38, name: 'Dry Manchurian', price: 150, description: 'Crispy fried vegetable balls tossed in a savory and slightly spicy Manchurian sauce.', image: 'Dry Manchurian.webp', category: 'Chinese Special', searchTerms: ['manchurian', 'dry', 'chinese', 'starter'] },
            { id: 39, name: 'Gravy Manchurian', price: 150, description: 'Vegetable balls simmered in a flavorful, tangy, and savory Manchurian gravy.', image: 'Gravy Manchurian.webp', category: 'Chinese Special', searchTerms: ['manchurian', 'gravy', 'chinese', 'main course'] },
            { id: 40, name: 'Paneer Chilli', price: 250, description: 'A popular Indo-Chinese dish of fried paneer cubes tossed in a spicy, sweet, and sour chili sauce.', image: 'Paneer Chilli.webp', category: 'Chinese Special', searchTerms: ['paneer', 'chilli', 'chinese', 'starter', 'spicy'] },
            { id: 41, name: 'Paneer Chilli Gravy', price: 240, description: 'Soft paneer cubes simmered in a spicy and tangy gravy with bell peppers and onions.', image: 'Paneer Chilli Gravy.webp', category: 'Chinese Special', searchTerms: ['paneer', 'chilli', 'gravy', 'chinese', 'main course'] },
            { id: 42, name: 'Veg Crispy', price: 180, description: 'Assorted vegetables battered, fried to a perfect crisp, and tossed in a tangy sauce.', image: 'Veg Crispy.webp', category: 'Chinese Special', searchTerms: ['veg', 'crispy', 'chinese', 'starter'] },
            { id: 43, name: 'Hooney Chilli Potato', price: 200, description: 'Crispy fried potato strips tossed in a sweet and spicy sauce with honey, chili, and sesame seeds.', image: 'Hooney Chilli Potato.webp', category: 'Chinese Special', searchTerms: ['honey', 'chilli', 'potato', 'chinese', 'starter'] },
            { id: 44, name: 'Paneer 65', price: 260, description: 'A spicy, deep-fried paneer dish originating from South India, tossed in a fiery sauce.', image: 'Paneer 65.webp', category: 'Chinese Special', searchTerms: ['paneer 65', 'spicy', 'starter'] },
            { id: 45, name: 'Sp. Sizzling Dragon Paneer', price: 320, description: 'A fiery and sizzling dish of paneer cooked in a special spicy dragon sauce, served on a hot plate.', image: 'Sp. Sizzling Dragon Paneer.webp', category: 'Chinese Special', searchTerms: ['sizzling', 'dragon', 'paneer', 'spicy', 'starter'] },
            { id: 46, name: 'Sizzling Bhel', price: 270, description: 'A unique fusion of Chinese bhel served on a sizzling platter for a crunchy, hot and cold experience.', image: 'Sizzling Bhel.webp', category: 'Chinese Special', searchTerms: ['sizzling', 'bhel', 'chinese', 'fusion', 'starter'] },
            
            // NOODLES
            { id: 47, name: 'Hakka Noodles', price: 150, description: 'Classic stir-fried noodles with a mix of fresh vegetables and savory sauces.', image: 'Hakka Noodles.webp', category: 'Noodles', searchTerms: ['hakka', 'noodles', 'chinese', 'main course'] },
            { id: 48, name: 'Sez Noodles', price: 160, description: 'Spicy stir-fried noodles tossed in a fiery Schezwan sauce with vegetables.', image: 'Sez Noodles.webp', category: 'Noodles', searchTerms: ['sez', 'schezwan', 'noodles', 'chinese', 'spicy'] },
            { id: 49, name: 'Manchurian Noodles', price: 160, description: 'A delicious combination of stir-fried noodles and vegetable manchurian balls.', image: 'Manchurian Noodles.webp', category: 'Noodles', searchTerms: ['manchurian', 'noodles', 'chinese'] },
            { id: 50, name: 'Singapuri Noodles', price: 180, description: 'Stir-fried vermicelli noodles with a mild curry flavor, vegetables, and a hint of sweetness.', image: 'Singapuri Noodles.webp', category: 'Noodles', searchTerms: ['singapuri', 'noodles', 'chinese', 'curry'] },
            { id: 51, name: 'Chinese Bhel', price: 180, description: 'A crunchy and tangy snack made with fried noodles, fresh vegetables, and savory sauces.', image: 'Chinese Bhel.webp', category: 'Noodles', searchTerms: ['chinese', 'bhel', 'starter'] },
            { id: 52, name: 'Chilli Garlic Paper Noodles', price: 180, description: 'A spicy and aromatic dish of flat noodles tossed with chili, garlic, and exotic vegetables.', image: 'Chilli Garlic Paper Noodles.webp', category: 'Noodles', searchTerms: ['chilli', 'garlic', 'noodles', 'spicy'] },
            
            // RICE (Chinese)
            { id: 53, name: 'Fried Rice', price: 130, description: 'A comforting dish of cooked rice stir-fried with vegetables and seasoned with soy sauce.', image: 'Fried Rice.webp', category: 'Rice', searchTerms: ['fried rice', 'rice', 'chinese'] },
            { id: 54, name: 'Sez Rice', price: 150, description: 'A spicy version of fried rice cooked with fiery Schezwan sauce and mixed vegetables.', image: 'Sez Rice.webp', category: 'Rice', searchTerms: ['sez', 'schezwan', 'fried rice', 'rice', 'spicy'] },
            { id: 55, name: 'Manchurian Rice', price: 150, description: 'Flavorful fried rice topped with savory vegetable manchurian gravy.', image: 'Manchurian Rice.webp', category: 'Rice', searchTerms: ['manchurian', 'fried rice', 'rice'] },
            { id: 56, name: 'Singapuri Rice', price: 160, description: 'A unique fried rice dish with a mild curry flavor and assorted vegetables.', image: 'Singapuri Rice.webp', category: 'Rice', searchTerms: ['singapuri', 'fried rice', 'rice', 'curry'] },

            // FRENCH FRIES
            { id: 57, name: 'Plain Fries', price: 90, description: 'Classic golden-brown, crispy potato french fries, lightly salted.', image: 'Plain Fries.webp', category: 'French Fries', searchTerms: ['french fries', 'fries', 'potato', 'side'] },
            { id: 58, name: 'Salted Fries', price: 100, description: 'Crispy golden french fries perfectly seasoned with salt.', image: 'Salted Fries.webp', category: 'French Fries', searchTerms: ['salted', 'french fries', 'fries', 'potato', 'side'] },
            { id: 59, name: 'Masala Fries', price: 120, description: 'Crispy french fries tossed in a special blend of Indian spices for a flavorful twist.', image: 'Masala Fries.webp', category: 'French Fries', searchTerms: ['masala', 'french fries', 'fries', 'potato', 'side', 'spicy'] },

            // SABJI SPECIAL
            { id: 60, name: 'Veg Kadai', price: 200, description: 'A mix of assorted vegetables cooked in a rich, spicy gravy with traditional Indian spices in a kadai.', image: 'Veg Kadai.webp', category: 'Sabji Special', searchTerms: ['veg', 'kadai', 'sabji', 'main course', 'punjabi'] },
            { id: 61, name: 'Punjabi Kadai', price: 220, description: 'A robust dish of mixed vegetables cooked in a spicy, tomato-based Punjabi-style gravy.', image: 'Punjabi Kadai.webp', category: 'Sabji Special', searchTerms: ['punjabi', 'kadai', 'sabji', 'main course'] },
            { id: 62, name: 'Veg Kolahpuri', price: 230, description: 'A spicy and thick mixed vegetable curry from Kolhapur, known for its robust flavors and fiery taste.', image: 'Veg Kolahpuri.webp', category: 'Sabji Special', searchTerms: ['veg', 'kolhapuri', 'sabji', 'main course', 'spicy'] },
            { id: 63, name: 'Deewani Handi', price: 240, description: 'A rich and creamy mixed vegetable curry cooked in a handi, fit for royalty.', image: 'Deewani Handi.webp', category: 'Sabji Special', searchTerms: ['deewani', 'handi', 'veg', 'sabji', 'main course', 'creamy'] },
            { id: 64, name: 'Veg Angara', price: 270, description: 'A smoky and spicy mixed vegetable dish, infused with the flavor of charcoal.', image: 'Veg Angara.webp', category: 'Sabji Special', searchTerms: ['veg', 'angara', 'smoky', 'spicy', 'sabji', 'main course'] },
            { id: 65, name: 'Mix Veg', price: 220, description: 'A simple yet delicious curry made with a variety of fresh seasonal vegetables.', image: 'Mix Veg.webp', category: 'Sabji Special', searchTerms: ['mix veg', 'sabji', 'main course'] },

            // CHEESE SPECIAL
            { id: 66, name: 'Cheese Butter Masala', price: 280, description: 'A decadent and rich curry made with processed cheese in a creamy tomato and butter gravy.', image: 'Cheese Butter Masala.webp', category: 'Cheese Special', searchTerms: ['cheese', 'butter', 'masala', 'sabji', 'creamy'] },
            { id: 67, name: 'Cheese Paneer Masala', price: 300, description: 'An indulgent combination of cheese and paneer in a rich, spiced tomato gravy.', image: 'Cheese Paneer Masala.webp', category: 'Cheese Special', searchTerms: ['cheese', 'paneer', 'masala', 'sabji'] },
            { id: 68, name: 'Cheese Kaju Masala', price: 320, description: 'A luxurious curry made with roasted cashews and cheese in a creamy, flavorful gravy.', image: 'Cheese Kaju Masala.webp', category: 'Cheese Special', searchTerms: ['cheese', 'kaju', 'cashew', 'masala', 'sabji', 'rich'] },
            { id: 69, name: 'Cheese Kaju Paneer Masala', price: 340, description: 'The ultimate rich curry with cheese, cashews, and paneer in a signature masala base.', image: 'Cheese Kaju Paneer Masala.webp', category: 'Cheese Special', searchTerms: ['cheese', 'kaju', 'paneer', 'masala', 'sabji'] },
            { id: 70, name: 'Sizzling Cheese Angara', price: 350, description: 'A smoky and spicy cheese curry served sizzling hot, infused with the flavor of charcoal.', image: 'Sizzling Cheese Angara.webp', category: 'Cheese Special', searchTerms: ['sizzling', 'cheese', 'angara', 'smoky', 'spicy'] },
            { id: 149, name: 'Cheese Angoori', price: 350, description: 'Delicious cheese balls simmered in a rich and creamy gravy.', image: 'Cheese Butter Masala.webp', category: 'Cheese Special', searchTerms: ['cheese', 'angoori', 'balls', 'creamy', 'sabji'] },

            // DAL SPECIAL
            { id: 71, name: 'Dal Fry', price: 150, description: 'A simple yet delicious lentil dish made with arhar dal and tempered with spices.', image: 'Dal Fry.webp', category: 'Dal Special', searchTerms: ['dal', 'fry', 'lentils', 'main course'] },
            { id: 72, name: 'Dal Tadka', price: 170, description: 'Popular Indian lentil dish where cooked lentils are finished with a tempering of spices in ghee.', image: 'Dal Tadka.webp', category: 'Dal Special', searchTerms: ['dal', 'tadka', 'lentils', 'main course', 'punjabi'] },
            { id: 73, name: 'Dal Makhani', price: 190, description: 'A classic Punjabi dish made with whole black lentils, red kidney beans, butter, and cream.', image: 'Dal Makhani.webp', category: 'Dal Special', searchTerms: ['dal', 'makhani', 'lentils', 'main course', 'creamy'] },
            { id: 74, name: 'Dal Makhani Tadka', price: 210, description: 'Our rich Dal Makhani finished with an extra tempering of aromatic spices in ghee.', image: 'Dal Makhani Tadka.webp', category: 'Dal Special', searchTerms: ['dal', 'makhani', 'tadka', 'lentils'] },
            { id: 75, name: 'Ex Tadka', price: 30, description: 'An extra serving of our flavorful tadka (tempering) to add to any dish.', image: 'Ex Tadka.webp', category: 'Dal Special', searchTerms: ['extra', 'tadka', 'tempering'] },

            // NAWABO KI BIRYANI
            { id: 76, name: 'Dum Matka Biryani', price: 250, description: 'Fragrant basmati rice and vegetables slow-cooked in a sealed clay pot (matka) to lock in flavors.', image: 'Dum Matka Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['dum', 'matka', 'biryani', 'rice', 'slow cooked'] },
            { id: 77, name: 'Paneer Tikka Biryani', price: 270, description: 'A flavorful biryani where layers of fragrant rice are cooked with marinated and grilled paneer tikka.', image: 'Paneer Tikka Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['paneer', 'tikka', 'biryani', 'rice'] },
            { id: 78, name: 'Hydrabadi Biryani', price: 280, description: 'A famous biryani variant from Hyderabad, known for its aromatic spices and rich flavor.', image: 'Hydrabadi Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['hydrabadi', 'biryani', 'rice', 'spicy'] },
            { id: 79, name: 'Luckhnowi Biryani', price: 300, description: 'A subtle and aromatic biryani from Lucknow, cooked in the traditional Awadhi style.', image: 'Luckhnowi Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['luckhnowi', 'biryani', 'rice', 'awadhi'] },
            { id: 80, name: 'Smokey Biryani', price: 350, description: 'A uniquely flavored biryani infused with a smoky charcoal aroma.', image: 'Smokey Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['smokey', 'biryani', 'rice'] },
            { id: 81, name: 'Special Sizzling Biryani', price: 400, description: 'Our house special biryani served on a sizzling hot plate for a dramatic and delicious experience.', image: 'Special Sizzling Biryani.webp', category: 'Nawabo ki Biryani', searchTerms: ['sizzling', 'biryani', 'rice', 'special'] },

            // PANEER SPECIAL
            { id: 82, name: 'Paneer Butter Masala', price: 270, description: 'A classic and creamy dish of paneer in a mildly sweet tomato and cashew-based gravy, rich in butter.', image: 'Paneer Butter Masala.webp', category: 'Paneer Special', searchTerms: ['paneer', 'butter', 'masala', 'sabji', 'creamy'] },
            { id: 83, name: 'Kadai Paneer', price: 230, description: 'A popular paneer dish where paneer and bell peppers are cooked in a freshly ground spicy masala.', image: 'Kadai Paneer.webp', category: 'Paneer Special', searchTerms: ['kadai', 'paneer', 'sabji', 'spicy'] },
            { id: 84, name: 'Paneer Tikka Masala', price: 270, description: 'Grilled paneer tikka simmered in a spicy and flavorful tomato-based gravy.', image: 'Paneer Tikka Masala.webp', category: 'Paneer Special', searchTerms: ['paneer', 'tikka', 'masala', 'sabji'] },
            { id: 85, name: 'Paneer Angara', price: 300, description: 'A smoky and spicy paneer dish, where the gravy is infused with charcoal flavor.', image: 'Paneer Angara.webp', category: 'Paneer Special', searchTerms: ['paneer', 'angara', 'smoky', 'spicy', 'sabji'] },
            { id: 86, name: 'Tawa Paneer', price: 280, description: 'A semi-dry curry of paneer cubes and spices cooked on a flat griddle (tawa).', image: 'Tawa Paneer.webp', category: 'Paneer Special', searchTerms: ['tawa', 'paneer', 'sabji'] },
            { id: 87, name: 'Paneer Bhurji', price: 280, description: 'A popular dish made from crumbled paneer cooked with onions, tomatoes, and spices.', image: 'Paneer Bhurji.webp', category: 'Paneer Special', searchTerms: ['paneer', 'bhurji', 'scrambled', 'sabji'] },
            { id: 88, name: 'Paneer Toofani', price: 270, description: 'A fiery and robust paneer curry packed with a storm of spices.', image: 'Paneer Toofani.webp', category: 'Paneer Special', searchTerms: ['paneer', 'toofani', 'spicy', 'sabji'] },
            { id: 89, name: 'Paneer Peshwari', price: 260, description: 'A rich and creamy paneer dish with nuts and spices, inspired by Peshawari cuisine.', image: 'Paneer Peshwari.webp', category: 'Paneer Special', searchTerms: ['paneer', 'peshwari', 'rich', 'sabji'] },
            { id: 90, name: 'Paneer Lababdar', price: 270, description: 'A luscious paneer dish in a creamy, tangy, and mildly sweet gravy.', image: 'Paneer Lababdar.webp', category: 'Paneer Special', searchTerms: ['paneer', 'lababdar', 'creamy', 'sabji'] },
            { id: 91, name: 'Shahi Paneer', price: 290, description: 'A royal and rich Mughlai dish of paneer in a thick, creamy, and spicy gravy.', image: 'Shahi Paneer.webp', category: 'Paneer Special', searchTerms: ['shahi', 'paneer', 'mughlai', 'creamy', 'sabji'] },
            { id: 92, name: 'Palak Paneer', price: 250, description: 'A healthy and flavorful dish made with paneer cubes in a smooth, creamy spinach gravy.', image: 'Palak Paneer.webp', category: 'Paneer Special', searchTerms: ['palak', 'paneer', 'spinach', 'sabji', 'healthy'] },
            { id: 93, name: 'Sizzling Lababdar', price: 320, description: 'Our delicious Paneer Lababdar served on a sizzling platter for an elevated experience.', image: 'Sizzling Lababdar.webp', category: 'Paneer Special', searchTerms: ['sizzling', 'paneer', 'lababdar', 'sabji'] },
            { id: 94, name: 'Paneer Agnipath', price: 470, description: 'An extremely spicy and challenging paneer dish for those who love fiery food.', image: 'Paneer Agnipath.webp', category: 'Paneer Special', searchTerms: ['paneer', 'agnipath', 'spicy', 'hot', 'sabji'] },
            { id: 150, name: 'Paneer Handi', price: 250, description: 'A creamy and mild curry cooked in a traditional handi pot.', image: 'Deewani Handi.webp', category: 'Paneer Special', searchTerms: ['paneer', 'handi', 'creamy', 'mild', 'sabji'] },

            // KAJU SPECIAL
            { id: 95, name: 'Kaju Masala', price: 280, description: 'A rich and creamy curry made with roasted cashews, cooked in a tomato-onion-based gravy.', image: 'Kaju Masala.webp', category: 'Kaju Special', searchTerms: ['kaju', 'cashew', 'masala', 'curry', 'sabji', 'rich'] },
            { id: 96, name: 'Kaju Curry', price: 260, description: 'A delicious and creamy curry made with whole or ground cashews.', image: 'Kaju Curry.webp', category: 'Kaju Special', searchTerms: ['kaju', 'cashew', 'curry', 'sabji'] },
            { id: 97, name: 'Kaju Paneer', price: 300, description: 'A rich dish combining the creaminess of cashews and the softness of paneer in one curry.', image: 'Kaju Paneer.webp', category: 'Kaju Special', searchTerms: ['kaju', 'cashew', 'paneer', 'sabji'] },

            // SIZZLERS
            { id: 98, name: 'Hamari Pahechan', price: 700, description: 'Our signature sizzler platter: Paneer Chilli, Garlic Noodles, Mix Sauce Pasta, Stuffed Veg, Soya Chaap, Lolipop, French Fries.', image: 'Hamari Pahechan Sizzler.webp', category: 'Sizzlers', searchTerms: ['sizzler', 'platter', 'special', 'paneer', 'noodles', 'pasta'] },
            { id: 99, name: 'Chinese Blast', price: 550, description: 'A sizzler of Chinese favorites: Paneer Fried Rice, Dry Manchurian, Paneer Chill, Sez Noodles, French Fries.', image: 'Chinese Blast Sizzler.webp', category: 'Sizzlers', searchTerms: ['sizzler', 'chinese', 'manchurian', 'fried rice', 'noodles'] },
            { id: 100, name: 'Sab Se Alag', price: 500, description: 'A unique sizzler with Red Gravy, Masala Rice, Stuffed Capsicum, Tomato, Cutlet, Lolipop with Cheese.', image: 'Sab Se Alag Sizzler.webp', category: 'Sizzlers', searchTerms: ['sizzler', 'unique', 'stuffed', 'cutlet'] },
            { id: 101, name: 'Kuch Aesa Bhi', price: 600, description: 'Another special sizzler featuring Sez Noodles, Paneer Chilli, Mix Sauce Pasta, Stuffed Capsicum, Tomato, French Fries.', image: 'Kuch Aesa Bhi Sizzler.webp', category: 'Sizzlers', searchTerms: ['sizzler', 'special', 'noodles', 'pasta', 'paneer'] },
            { id: 102, name: 'Sab Ki Pasand', price: 650, description: 'A crowd-pleasing sizzler with Toss Vegetable, Butter Garlic Rice, Dry Manchurian, Red Sauce Pasta, Paneer Tikka with Cheese.', image: 'Sab Ki Pasand Sizzler.webp', category: 'Sizzlers', searchTerms: ['sizzler', 'favorite', 'manchurian', 'pasta', 'paneer tikka'] },

            // PAPAD
            { id: 103, name: 'Roasted Papad', price: 20, description: 'A thin, crisp disc-shaped food, roasted over an open flame.', image: 'Roasted Papad.webp', category: 'Papad', searchTerms: ['papad', 'roasted', 'side', 'starter'] },
            { id: 104, name: 'Fry Papad', price: 30, description: 'Crispy, deep-fried papad that serves as a perfect crunchy accompaniment.', image: 'Fry Papad.webp', category: 'Papad', searchTerms: ['papad', 'fried', 'side', 'starter'] },
            { id: 105, name: 'Masala Papad', price: 40, description: 'Roasted papad topped with a tangy mixture of onions, tomatoes, and spices.', image: 'Masala Papad.webp', category: 'Papad', searchTerms: ['papad', 'masala', 'side', 'starter', 'chaat'] },
            { id: 106, name: 'Roasted Cheese Papad', price: 50, description: 'Roasted papad topped with a generous layer of melted cheese.', image: 'Roasted Cheese Papad.webp', category: 'Papad', searchTerms: ['papad', 'roasted', 'cheese', 'side', 'starter'] },
            { id: 107, name: 'Fry Cheese Papad', price: 70, description: 'Crispy fried papad loaded with melted cheese.', image: 'Fry Cheese Papad.webp', category: 'Papad', searchTerms: ['papad', 'fried', 'cheese', 'side', 'starter'] },
            { id: 108, name: 'Cheese Masala Papad', price: 80, description: 'The ultimate papad topped with both tangy masala and melted cheese.', image: 'Cheese Masala Papad.webp', category: 'Papad', searchTerms: ['papad', 'cheese', 'masala', 'side', 'starter'] },

            // DRINKS & ADD ON
            { id: 109, name: 'Cold Drink', price: 20, description: 'A selection of popular carbonated soft drinks.', image: 'Cold Drink.webp', category: 'Drinks & Add On', searchTerms: ['cold drink', 'soda', 'beverage'] },
            { id: 110, name: 'Mineral Water', price: 20, description: 'Packaged drinking water, served chilled.', image: 'Mineral Water.webp', category: 'Drinks & Add On', searchTerms: ['water', 'mineral', 'beverage'] },
            { id: 111, name: 'Butter Milk', price: 30, description: 'A refreshing and traditional Indian drink made from yogurt, lightly spiced.', image: 'Butter Milk.webp', category: 'Drinks & Add On', searchTerms: ['butter milk', 'chaas', 'beverage', 'yogurt'] },
            { id: 112, name: 'Ex Raita', price: 20, description: 'A side of yogurt-based dip, perfect for cooling the palate.', image: 'Ex Raita.webp', category: 'Drinks & Add On', searchTerms: ['raita', 'yogurt', 'side', 'add on'] },
            { id: 113, name: 'Ex Cheese', price: 40, description: 'An extra serving of cheese to add to any dish.', image: 'Ex Cheese.webp', category: 'Drinks & Add On', searchTerms: ['extra', 'cheese', 'add on'] },
            { id: 114, name: 'Curd', price: 20, description: 'A serving of plain, fresh curd (yogurt).', image: 'Curd.webp', category: 'Drinks & Add On', searchTerms: ['curd', 'yogurt', 'dahi'] },

            // RICE & PULAV
            { id: 115, name: 'Stem Rice', price: 100, description: 'Perfectly steamed, fluffy basmati rice.', image: 'Stem Rice.webp', category: 'Rice & Pulav', searchTerms: ['stem', 'steamed', 'plain', 'rice'] },
            { id: 116, name: 'Jeera Rice', price: 120, description: 'A simple yet aromatic rice dish flavored with cumin seeds (jeera).', image: 'Jeera Rice.webp', category: 'Rice & Pulav', searchTerms: ['jeera', 'rice', 'basmati'] },
            { id: 117, name: 'Veg Pulav', price: 150, description: 'A wholesome one-pot rice dish made with aromatic basmati rice and mixed vegetables.', image: 'Veg Pulav.webp', category: 'Rice & Pulav', searchTerms: ['veg', 'pulav', 'pulao', 'rice'] },
            { id: 118, name: 'Paneer Pulav', price: 180, description: 'Flavorful rice pulav cooked with soft paneer cubes and aromatic spices.', image: 'Paneer Pulav.webp', category: 'Rice & Pulav', searchTerms: ['paneer', 'pulav', 'pulao', 'rice'] },
            { id: 119, name: 'Masala Pulav', price: 170, description: 'A spicy and savory rice dish cooked with a blend of Indian spices and vegetables.', image: 'Masala Pulav.webp', category: 'Rice & Pulav', searchTerms: ['masala', 'pulav', 'pulao', 'rice', 'spicy'] },
            { id: 120, name: 'Kaju Paneer Pulav', price: 200, description: 'A rich and royal pulav made with paneer, cashews, and fragrant spices.', image: 'Kaju Paneer Pulav.webp', category: 'Rice & Pulav', searchTerms: ['kaju', 'paneer', 'pulav', 'pulao', 'rice'] },
            { id: 121, name: 'Cheese Butter Pulav', price: 220, description: 'An indulgent pulav cooked with butter and loaded with melted cheese.', image: 'Cheese Butter Pulav.webp', category: 'Rice & Pulav', searchTerms: ['cheese', 'butter', 'pulav', 'pulao', 'rice'] },
            { id: 122, name: 'Dal Khichdi', price: 180, description: 'A comforting and healthy one-pot meal of rice and lentils, cooked with ghee.', image: 'Dal Khichdi.webp', category: 'Rice & Pulav', searchTerms: ['dal', 'khichdi', 'rice', 'healthy', 'comfort food'] },

            // ROTI SPECIAL
            { id: 123, name: 'Chapati', price: 15, description: 'A traditional unleavened whole wheat flatbread.', image: 'Chapati.webp', category: 'Roti Special', searchTerms: ['chapati', 'roti', 'bread'] },
            { id: 124, name: 'Butter Chapati', price: 20, description: 'Soft whole wheat flatbread generously brushed with butter.', image: 'Butter Chapati.webp', category: 'Roti Special', searchTerms: ['butter', 'chapati', 'roti'] },
            { id: 125, name: 'Tandoori Roti', price: 20, description: 'A classic Indian flatbread made from whole wheat flour, baked in a tandoor.', image: 'Tandoori Roti.webp', category: 'Roti Special', searchTerms: ['tandoori', 'roti', 'bread'] },
            { id: 126, name: 'Butter Tandoori Roti', price: 25, description: 'Tandoor-baked whole wheat flatbread, served hot with butter.', image: 'Butter Tandoori Roti.webp', category: 'Roti Special', searchTerms: ['butter', 'tandoori', 'roti'] },
            { id: 127, name: 'Naan', price: 40, description: 'A soft and fluffy leavened flatbread, cooked in a tandoor oven.', image: 'Naan.webp', category: 'Roti Special', searchTerms: ['naan', 'bread', 'tandoori'] },
            { id: 128, name: 'Butter Naan', price: 50, description: 'Soft, tandoor-baked naan bread, lavishly coated with melted butter.', image: 'Butter Naan.webp', category: 'Roti Special', searchTerms: ['butter', 'naan', 'bread'] },
            { id: 129, name: 'Kulcha', price: 60, description: 'A mildy leavened flatbread that is soft and chewy.', image: 'Kulcha.webp', category: 'Roti Special', searchTerms: ['kulcha', 'bread'] },
            { id: 130, name: 'Butter Kulcha', price: 70, description: 'Soft and chewy kulcha bread, topped with a layer of butter.', image: 'Butter Kulcha.webp', category: 'Roti Special', searchTerms: ['butter', 'kulcha', 'bread'] },
            { id: 131, name: 'Laccha Paratha', price: 60, description: 'A multi-layered North Indian flatbread made from whole wheat flour.', image: 'Laccha Paratha.webp', category: 'Roti Special', searchTerms: ['laccha', 'paratha', 'layered', 'bread'] },
            { id: 132, name: 'Butter Laccha Paratha', price: 70, description: 'Crispy, flaky, multi-layered paratha cooked with butter.', image: 'Butter Laccha Paratha.webp', category: 'Roti Special', searchTerms: ['butter', 'laccha', 'paratha'] },
            { id: 133, name: 'Garlic Naan', price: 60, description: 'A popular variant of naan bread, flavored with finely chopped garlic and coriander.', image: 'Garlic Naan.webp', category: 'Roti Special', searchTerms: ['garlic', 'naan', 'bread'] },
            { id: 134, name: 'Butter Garlic Naan', price: 70, description: 'Soft naan bread flavored with garlic and generously brushed with butter.', image: 'Butter Garlic Naan.webp', category: 'Roti Special', searchTerms: ['butter', 'garlic', 'naan'] },
            { id: 135, name: 'Stuffed Cheese Naan', price: 200, description: 'A decadent naan bread stuffed with a delicious filling of melted cheese.', image: 'Stuffed Cheese Naan.webp', category: 'Roti Special', searchTerms: ['stuffed', 'cheese', 'naan'] },
            { id: 136, name: 'Butter Stuffed Cheese Naan', price: 220, description: 'Our cheese-stuffed naan, made even better with a coating of butter.', image: 'Butter Stuffed Cheese Naan.webp', category: 'Roti Special', searchTerms: ['butter', 'stuffed', 'cheese', 'naan'] },
            { id: 137, name: 'Cheese Garlic Naan', price: 220, description: 'An irresistible combination of cheese and garlic in a soft naan bread.', image: 'Cheese Garlic Naan.webp', category: 'Roti Special', searchTerms: ['cheese', 'garlic', 'naan'] },
            { id: 138, name: 'Butter Cheese Garlic Naan', price: 240, description: 'The ultimate naan, stuffed with cheese, flavored with garlic, and topped with butter.', image: 'Butter Cheese Garlic Naan.webp', category: 'Roti Special', searchTerms: ['butter', 'cheese', 'garlic', 'naan'] },
            { id: 139, name: 'Stuffed Paneer Kulcha', price: 180, description: 'Soft kulcha bread with a savory stuffing of spiced paneer.', image: 'Stuffed Paneer Kulcha.webp', category: 'Roti Special', searchTerms: ['stuffed', 'paneer', 'kulcha'] },
            { id: 140, name: 'Butter Stuffed Paneer Kulcha', price: 200, description: 'Paneer-stuffed kulcha served with a generous helping of butter.', image: 'Butter Stuffed Paneer Kulcha.webp', category: 'Roti Special', searchTerms: ['butter', 'stuffed', 'paneer', 'kulcha'] },
            { id: 141, name: 'Cheese Kulcha', price: 200, description: 'A soft and fluffy kulcha bread stuffed with a delectable cheese filling.', image: 'Cheese Kulcha.webp', category: 'Roti Special', searchTerms: ['cheese', 'kulcha', 'stuffed'] },
            { id: 142, name: 'Butter Cheese Kulcha', price: 220, description: 'Our delicious cheese kulcha, brushed with butter for extra flavor.', image: 'Butter Cheese Kulcha.webp', category: 'Roti Special', searchTerms: ['butter', 'cheese', 'kulcha'] },
            { id: 143, name: 'Cheese Paneer Kulcha', price: 220, description: 'A doubly delicious kulcha stuffed with both cheese and paneer.', image: 'Cheese Paneer Kulcha.webp', category: 'Roti Special', searchTerms: ['cheese', 'paneer', 'kulcha', 'stuffed'] },
            { id: 144, name: 'Butter Cheese Paneer Kulcha', price: 240, description: 'The richest kulcha on our menu, stuffed with cheese and paneer, and topped with butter.', image: 'Butter Cheese Paneer Kulcha.webp', category: 'Roti Special', searchTerms: ['butter', 'cheese', 'paneer', 'kulcha'] },
            
            // PARATHA
            { id: 145, name: 'Aloo Paratha', price: 100, description: 'A popular Indian flatbread stuffed with a delicious spiced potato mixture.', image: 'Aloo Paratha.webp', category: 'Paratha', searchTerms: ['aloo', 'paratha', 'bread', 'stuffed'] },
            { id: 146, name: 'Paneer Paratha', price: 150, description: 'A wholesome flatbread stuffed with a savory mixture of grated paneer and spices.', image: 'Paneer Paratha.webp', category: 'Paratha', searchTerms: ['paneer', 'paratha', 'bread', 'stuffed'] },
            { id: 147, name: 'Cheese Aloo Paratha', price: 140, description: 'A tasty twist on the classic, with spiced potato and cheese stuffing.', image: 'Cheese Aloo Paratha.webp', category: 'Paratha', searchTerms: ['cheese', 'aloo', 'paratha', 'bread', 'stuffed'] },
            { id: 148, name: 'Mix - Veg Paratha', price: 140, description: 'A healthy and delicious paratha stuffed with a medley of mixed vegetables.', image: 'Mix - Veg Paratha.webp', category: 'Paratha', searchTerms: ['mix veg', 'paratha', 'bread', 'stuffed'] },
        ];


        const popularSearches = ['Paneer Tikka', 'Masala Chaap', 'Sizzler', 'Dal Makhani', 'Biryani', 'Pav Bhaji'];
        const searchSuggestions = [...new Set(MENU.flatMap(item => [item.name, ...item.searchTerms, item.category]))];
        
        const categoryImages = {
            'All': 'Paneer Butter Masala.webp',
            'Soup': 'Manchow Soup.webp',
            'BBQ': 'Paneer Tikka.webp',
            'Chaap': 'Masala Chaap.webp',
            'Momos': 'Fry Momos.webp',
            'Pasta': 'Red Sauce Pasta.webp',
            'Pav Bhaji': 'Pav Bhaji.webp',
            'Chhole Special': 'Chhole Bhature.webp',
            'Chinese Special': 'Paneer Chilli.webp',
            'Noodles': 'Hakka Noodles.webp',
            'Rice': 'Fried Rice.webp',
            'French Fries': 'Masala Fries.webp',
            'Sabji Special': 'Veg Kadai.webp',
            'Cheese Special': 'Cheese Butter Masala.webp',
            'Dal Special': 'Dal Makhani.webp',
            'Nawabo ki Biryani': 'Dum Matka Biryani.webp',
            'Paneer Special': 'Paneer Butter Masala.webp',
            'Kaju Special': 'Kaju Masala.webp',
            'Sizzlers': 'Hamari Pahechan Sizzler.webp',
            'Papad': 'Masala Papad.webp',
            'Drinks & Add On': 'Mineral Water.webp',
            'Rice & Pulav': 'Veg Pulav.webp',
            'Roti Special': 'Tandoori Roti.webp',
            'Paratha': 'Aloo Paratha.webp'
        };


        // --- STATE MANAGEMENT ---
        let state = {
            showSplash: true,
            cart: {},
            isCartOpen: false,
            isSearchOpen: false,
            tableNumber: TABLE_NUMBERS[0] || '',
            message: null,
            previousOrder: JSON.parse(localStorage.getItem('previousOrder')) || null,
            activeCategory: 'All',
            searchResults: null,
            searchQueryDisplay: '',
            isCategoryModalOpen: false,
            isFloatingCategoryButtonVisible: false,
            isFloatingCartButtonVisible: false,
            orderJustSent: false,
            lastAddedItem: null,
            notificationKey: 0,
            selectedItem: null,
            isInstallable: false,
            favorites: JSON.parse(localStorage.getItem('favorites')) || [],
            showFavorites: false
        };

        const root = document.getElementById('root');

        // --- RENDER FUNCTIONS (Component Equivalents) ---

        const SplashScreen = () => `
            <div id="splash-screen" class="fixed top-0 left-0 w-screen h-screen bg-[#f2e3e3] flex justify-center items-center z-[1000] splash-enter-active">
                <div class="flex justify-center items-center h-full w-full p-4 max-w-full logo-animation">
                    <img src="Logo2.png" alt="Nai Bahu Logo" class="max-w-[80%] max-h-[50vh] h-auto block" />
                </div>
            </div>
        `;

        const Header = ({ tableNumber, cartCount, isInstallable, showFavorites, favoritesCount }) => `
            <header class="sticky top-0 z-40 shadow-lg text-white w-full bg-[#A40046] border-b-2 border-[#C0A062]/60">
                <nav class="container mx-auto px-2 sm:px-4 lg:px-8 py-2 sm:py-4 flex justify-between items-center">
                    <a href="#" class="flex items-center space-x-1 sm:space-x-2 flex-shrink-0">
                        <img src="naibahu.png" alt="Logo" class="h-6 sm:h-8 lg:h-10 w-auto" />
                        <span class="font-extrabold text-sm sm:text-lg lg:text-xl royal-font">NA‡§à ‡§¨‡§π‡•Å</span>
                    </a>
                    <div class="flex items-center space-x-1 sm:space-x-2 lg:space-x-4">
                        ${isInstallable ? `
                            <button id="install-app-btn" class="relative p-2 sm:p-2.5 rounded-xl hover:bg-[#830038] transition-colors bg-[#C0A062] text-white shadow-md animate-pulse" title="Install App">
                                <svg class="w-5 h-5 sm:w-6 sm:h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            </button>
                        ` : ''}
                        <div class="flex items-center space-x-1">
                            <label for="table-number-select" class="text-sm font-medium hidden sm:inline">Table No:</label>
                             <select id="table-number-select" class="w-24 sm:w-28 p-1 sm:p-2 text-sm border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 transition-colors text-[#A40046] bg-[#F5EFE6] font-semibold">
                                ${TABLE_NUMBERS.map(num => `<option value="${num}" ${tableNumber == num ? 'selected' : ''}>Table ${num}</option>`).join('')}
                            </select>
                        </div>
                        <button id="search-btn" class="relative p-2 sm:p-2.5 rounded-xl hover:bg-[#830038] transition-colors">
                            <svg class="w-5 h-5 sm:w-6 sm:h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        </button>
                        <button id="favorites-btn" class="relative p-2 sm:p-2.5 rounded-xl hover:bg-[#830038] transition-colors ${showFavorites ? 'bg-[#830038] text-rose-200' : ''}">
                            <svg class="w-5 h-5 sm:w-6 sm:h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${showFavorites ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                             ${favoritesCount > 0 ? `<span class="absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-rose-600 rounded-full">${favoritesCount}</span>` : ''}
                        </button>
                        <button id="cart-btn" class="relative p-2 sm:p-2.5 rounded-xl hover:bg-[#830038] transition-colors">
                            <svg class="w-5 h-5 sm:w-6 sm:h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                            ${cartCount > 0 ? `<span class="absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-rose-600 rounded-full">${cartCount}</span>` : ''}
                        </button>
                    </div>
                </nav>
            </header>
        `;

        const MenuItemCard = ({ item, isFavorite }) => `
            <div class="menu-item-card relative bg-[#F5EFE6] rounded-lg shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 flex flex-col border-2 border-[#C0A062]/50 cursor-pointer" data-item-id="${item.id}">
                <button class="favorite-toggle-btn absolute top-2 right-2 z-20 p-1.5 rounded-full bg-white/90 shadow-sm hover:bg-white transition-transform hover:scale-110 active:scale-95" data-item-id="${item.id}">
                     ${isFavorite 
                        ? `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#A40046" stroke="#A40046" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`
                        : `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#A40046" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`
                     }
                </button>
                <div class="p-4 sm:p-5 flex-grow flex items-center gap-4">
                    <img src="${item.image}" alt="${item.name}" class="w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-lg shadow-md flex-shrink-0 border-2 border-white/50" loading="lazy">
                    <div class="flex-grow flex flex-col min-w-0 h-full">
                        <h3 class="text-lg sm:text-xl font-bold royal-font text-[#A40046] truncate pr-8">${item.name}</h3>
                        <p class="text-[#5D4037] text-xs sm:text-sm my-1 line-clamp-2 flex-grow">${item.description}</p>
                        <div class="flex justify-between items-center mt-auto">
                            <span class="text-xl sm:text-2xl font-bold font-sans text-[#5D4037]">
                                <span class="text-sm font-normal align-middle">‚Çπ</span>${item.price}
                            </span>
                            <button class="add-to-cart-btn bg-[#A40046] text-white px-4 py-2 rounded-full font-bold shadow-lg hover:bg-[#830038] text-xs sm:text-sm flex items-center gap-1.5" data-item-id="${item.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                <span>Add</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        const CategorySlider = ({ activeCategory }) => {
            const categories = ['All', ...Object.keys(categoryImages).filter(c => c !== 'All')];
            return `
                <div class="col-span-1 md:col-span-2 my-6 md:my-8">
                    <h3 class="text-xl font-bold royal-font mb-4 text-white px-2">Check Out More Food Sections</h3>
                    <div class="category-slider-container flex items-center gap-4 overflow-x-auto pb-4 px-2">
                        ${categories.map(category => `
                            <div class="category-slider-item flex-shrink-0 w-32 h-40 rounded-lg shadow-lg relative overflow-hidden cursor-pointer group" data-category="${category}">
                                <img src="${categoryImages[category]}" alt="${category}" class="w-full h-full object-cover" loading="lazy"/>
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                                <h4 class="absolute bottom-3 left-3 text-white font-bold royal-font">${category}</h4>
                                ${activeCategory === category ? `
                                    <div class="absolute top-2 right-2 bg-white text-[#A40046] rounded-full p-1 flex items-center justify-center">
                                         <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        };

        const MenuSection = ({ activeCategory, searchResults, searchQueryDisplay, filteredMenu, showFavorites, favorites }) => {
            const itemsToDisplay = searchResults !== null ? searchResults : filteredMenu;
            
            const menuItemsHtml = itemsToDisplay.reduce((acc, item, index) => {
                const isFavorite = favorites.includes(item.id);
                acc.push(MenuItemCard({ item, isFavorite }));
                // Insert slider after the 5th item (index 4), only if not searching and not viewing favorites
                if (index === 4 && searchResults === null && !showFavorites) {
                    acc.push(CategorySlider({ activeCategory }));
                }
                return acc;
            }, []).join('');

            return `
                <div class="lg:col-span-2">
                    ${searchResults !== null ? `
                        <div class="flex justify-between items-center mb-4 sm:mb-6">
                            <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold royal-font">Search Results for "${searchQueryDisplay}"</h2>
                            <button id="clear-search-btn" class="text-sm text-rose-300 hover:text-white transition-colors">Clear Search</button>
                        </div>
                    ` : `
                        <div class="flex justify-between items-center mb-2">
                            <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold royal-font">${showFavorites ? 'Your Favorites' : 'Explore Our Menu'}</h2>
                            ${!showFavorites ? `
                            <button id="category-modal-trigger" class="flex items-center gap-2 bg-[#F5EFE6] text-[#A40046] px-4 py-2 rounded-full font-bold shadow-md hover:bg-white transition-colors transform hover:scale-105 border-2 border-[#C0A062]/50">
                                <span>${activeCategory}</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                            </button>
                            ` : ''}
                        </div>

                        <!-- Reverted Location and Time Section -->
                        <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 mb-6 text-gray-200 text-sm sm:text-base font-medium">
                             <a href="https://maps.google.com/?q=Nai+Bahu+Restaurant" target="_blank" class="flex items-center gap-2 hover:text-[#C0A062] transition-colors w-fit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                <span class="underline underline-offset-2 decoration-[#C0A062]/60">View Location</span>
                            </a>
                            <div class="flex items-center gap-2 w-fit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                                <span>5:00 p.m to 2:30 a.m</span>
                            </div>
                        </div>
                    `}
                    
                    ${itemsToDisplay.length > 0 ? `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            ${menuItemsHtml}
                        </div>
                    ` : `
                        <div class="text-center py-10 sm:py-20 px-4 col-span-full">
                            <p class="text-lg text-gray-300">${showFavorites ? "You haven't added any favorites yet." : `No items found for "${searchQueryDisplay}". Try a different search!`}</p>
                            ${showFavorites ? `<button id="back-to-menu-btn" class="mt-4 bg-white text-[#A40046] px-6 py-2 rounded-full font-bold hover:bg-gray-100 transition-colors">Browse Menu</button>` : ''}
                        </div>
                    `}
                </div>
            `;
        };
        
        const CategoryModal = ({ isOpen, activeCategory }) => {
            if (!isOpen) return '';
            const categories = ['All', ...Object.keys(categoryImages).filter(c => c !== 'All')];
            return `
                <div id="category-modal-overlay" class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-fade-in">
                    <div class="bg-[#F5EFE6] rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-scale-up">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl royal-font font-bold text-[#5D4037]">Select a Category</h3>
                            <button id="category-modal-close" class="p-2 rounded-full hover:bg-gray-200 text-gray-600 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                            </button>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            ${categories.map(category => `
                                <div class="category-select-item relative rounded-lg overflow-hidden shadow-lg h-32 md:h-48 cursor-pointer group transform transition-transform duration-300 hover:scale-105" data-category="${category}">
                                    <img src="${categoryImages[category]}" alt="${category}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110" loading="lazy"/>
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                                    <h4 class="absolute bottom-4 left-4 text-white text-lg md:text-xl font-bold royal-font">${category}</h4>
                                    ${activeCategory === category ? `
                                        <div class="absolute top-2 right-2 bg-white text-[#A40046] rounded-full p-1.5">
                                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                        </div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        };

        const ItemDetailModal = ({ item }) => {
            if (!item) return '';
            return `
                <div id="item-detail-overlay" class="fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-4 animate-modal-fade-in">
                    <div id="item-detail-content" class="bg-[#F5EFE6] text-[#5D4037] rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col overflow-hidden animate-modal-scale-up">
                        <div class="relative flex-shrink-0">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-56 object-cover">
                            <button id="modal-close-btn" class="absolute top-3 right-3 bg-white/70 text-gray-800 rounded-full p-2 hover:bg-white transition-colors z-10">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                        <div class="p-6 flex-grow overflow-y-auto">
                            <h3 class="text-3xl font-bold royal-font text-[#A40046] mb-2">${item.name}</h3>
                            <p class="text-gray-600 mb-4 leading-relaxed">${item.description}</p>
                        </div>
                        <div class="p-6 border-t border-gray-200 flex justify-between items-center bg-white/50 flex-shrink-0">
                            <span class="text-3xl font-bold font-sans text-[#5D4037]"><span class="text-xl align-middle">‚Çπ</span>${item.price}</span>
                            <button class="modal-add-to-cart-btn bg-[#A40046] text-white px-5 py-3 rounded-full font-bold shadow-lg hover:bg-[#830038] text-sm flex items-center gap-2" data-item-id="${item.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                <span>Add to Order</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        };

        const FollowUsSection = () => `
            <div class="text-center py-8 px-4 flex flex-col items-center animate-fade-in">
                <h4 class="text-lg font-bold royal-font text-[#A40046]">Thank You For Your Order!</h4>
                <p class="text-gray-600 text-sm mt-2 mb-6">We hope you enjoyed your meal.</p>
                <div class="w-full border-t border-gray-300 my-4"></div>
                <h5 class="font-semibold text-gray-700 mb-4">Follow Us & Stay in Touch</h5>
                <div class="flex items-center justify-center space-x-6 mb-6">
                    <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-[#A40046] transition-colors transform hover:scale-110">
                        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                    </a>
                    <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-[#A40046] transition-colors transform hover:scale-110">
                        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878V14.89h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"></path></svg>
                    </a>
                </div>
                <div class="flex items-center text-gray-600">
                     <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                    <span class="ml-2 font-medium">92650 84656</span>
                </div>
            </div>
        `;

        const CartSidebar = ({ isOpen, cart, previousOrder, message, orderJustSent }) => {
            const items = Object.values(cart);
            const total = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            return `
                <aside class="fixed top-0 right-0 w-full sm:max-w-sm md:max-w-md h-full bg-[#F5EFE6] text-[#5D4037] z-50 transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : 'translate-x-full'} lg:sticky lg:top-24 lg:transform-none lg:h-auto lg:max-h-[calc(100vh-120px)] p-3 sm:p-4 lg:p-6 rounded-l-2xl lg:rounded-2xl shadow-2xl flex flex-col">
                    ${previousOrder && !orderJustSent ? `
                        <div class="mb-3 sm:mb-4 lg:mb-6">
                            <h3 class="text-base sm:text-lg lg:text-xl royal-font font-semibold mb-2">Previous Order</h3>
                            <div class="p-2 sm:p-3 lg:p-4 bg-[#EAE3D9] rounded-xl border border-gray-300">
                                <p class="text-gray-500 text-xs mb-2">Order from ${new Date(previousOrder.timestamp).toLocaleDateString()}</p>
                                ${previousOrder.items.map(item => `<div key="${item.id}" class="flex justify-between text-xs sm:text-sm"><span class="text-gray-600">${item.name} x ${item.quantity}</span><span class="font-medium text-gray-700">‚Çπ${item.price * item.quantity}</span></div>`).join('')}
                                <div class="flex justify-between font-bold text-sm sm:text-base mt-2 pt-2 border-t border-gray-300"><span>Total</span><span>‚Çπ${previousOrder.total}</span></div>
                            </div>
                        </div>
                    ` : ''}
                    <div class="flex justify-between items-center mb-3 sm:mb-4 lg:mb-6">
                        <h3 class="text-lg sm:text-xl lg:text-2xl royal-font font-semibold">Your Order</h3>
                        <button id="cart-close-btn" class="lg:hidden p-2 rounded-full hover:bg-gray-200 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                        </button>
                    </div>
                    <div class="flex-grow overflow-y-auto min-h-0 space-y-2 sm:space-y-3 cart-items-scrollbar pr-2">
                        ${items.length === 0 ? (orderJustSent ? FollowUsSection() : `<div class="text-center text-gray-500 py-8">Your cart is empty.</div>`) : items.map((item, index) => `
                            <div class="cart-item-enter flex items-center justify-between border-b border-gray-200 pb-2 sm:pb-3 last:border-b-0 last:pb-0" style="animation-delay: ${index * 50}ms">
                                <div class="flex-1 min-w-0"><p class="font-medium text-sm lg:text-base truncate">${item.name}</p><p class="text-xs text-gray-500">‚Çπ${item.price} each</p></div>
                                <div class="flex items-center space-x-1 sm:space-x-2 flex-shrink-0">
                                    <button class="quantity-change-btn bg-stone-200 text-gray-700 w-7 h-7 rounded-full flex items-center justify-center font-bold text-lg hover:bg-stone-300 transition-colors" data-item-id="${item.id}" data-change="-1">-</button>
                                    <span class="font-semibold w-6 text-center text-sm lg:text-base">${item.quantity}</span>
                                    <button class="quantity-change-btn bg-stone-200 text-gray-700 w-7 h-7 rounded-full flex items-center justify-center font-bold text-lg hover:bg-stone-300 transition-colors" data-item-id="${item.id}" data-change="1">+</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="mt-auto pt-3 sm:pt-4">
                        <div class="pt-3 sm:pt-4 border-t border-gray-300">
                            <div class="flex justify-between text-base sm:text-lg font-medium mb-2">
                                <span>Total</span>
                                <span>‚Çπ${total.toFixed(0)}</span>
                            </div>
                        </div>
                        ${message ? `<div class="my-3 p-3 rounded-xl text-sm font-medium ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${message.text}</div>` : ''}
                        <button id="send-order-btn" ${items.length === 0 ? 'disabled' : ''} class="w-full mt-3 py-3 px-6 rounded-xl text-white font-semibold transition-all duration-300 bg-[#A40046] hover:bg-[#830038] focus:outline-none focus:ring-4 focus:ring-rose-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2">
                            <span id="send-order-text">Send Order</span>
                        </button>
                    </div>
                </aside>
            `;
        };

        const SearchModal = ({ isOpen }) => {
            if (!isOpen) return '';
            // Note: The internal state of this modal is handled by event listeners directly
            return `
                <div id="search-modal-overlay" class="fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-2">
                    <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col">
                        <div class="flex justify-between items-center mb-3 sm:mb-4">
                            <h3 class="text-lg sm:text-xl lg:text-2xl royal-font font-semibold text-gray-800">Search Menu</h3>
                            <button id="search-modal-close" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
                            </button>
                        </div>
                        <input type="text" id="search-input" placeholder="Search for dishes..." class="bg-white border-2 border-gray-200 text-gray-800 text-base p-3 rounded-xl w-full transition-all duration-300 font-medium focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-200" />
                        <div id="search-content" class="flex-grow overflow-y-auto mt-4"></div>
                        <div class="flex space-x-2 mt-4">
                            <button id="perform-search-btn" class="flex-1 bg-[#A40046] text-white px-6 py-3 rounded-lg font-medium shadow-md hover:bg-[#830038]">Search</button>
                            <button id="clear-search-input-btn" class="bg-gray-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-600">Clear</button>
                        </div>
                    </div>
                </div>
            `;
        };
        
        const FloatingCategoryButton = ({ isVisible }) => `
            <button id="floating-category-btn" class="fixed bottom-8 right-6 z-40 w-14 h-14 bg-[#A40046] text-white rounded-full flex items-center justify-center shadow-lg transform transition-all duration-300 ease-in-out hover:bg-[#830038] focus:outline-none focus:ring-4 focus:ring-rose-300 lg:hidden ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
            </button>
        `;

        const FloatingCartButton = ({ isVisible, cartCount }) => `
            <button id="floating-cart-btn" class="fixed bottom-28 right-6 z-40 w-14 h-14 bg-white text-[#A40046] rounded-full flex items-center justify-center shadow-lg transform transition-all duration-300 ease-in-out hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-pink-200 lg:hidden ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'}">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                ${cartCount > 0 ? `<span class="absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform bg-rose-600 rounded-full">${cartCount}</span>` : ''}
            </button>
        `;
        
        const AddToCartNotification = ({ itemName, key }) => {
            if (!itemName) return '';
            return `
                <div key="${key}" class="fixed top-20 left-1/2 -translate-x-1/2 z-[100] animate-notification">
                    <div class="flex items-center gap-4 bg-white/90 backdrop-blur-sm text-[#A40046] p-4 rounded-xl shadow-2xl border border-pink-200">
                        <div class="bg-green-100 text-green-600 rounded-full p-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg></div>
                        <div class="flex flex-col"><span class="font-bold">Added to Your Order!</span><span class="text-sm text-gray-600">${itemName}</span></div>
                    </div>
                </div>
            `;
        };

        const Footer = () => `
            <footer class="bg-[#830038] text-white py-6 mt-12 border-t-2 border-[#C0A062]/60">
                <div class="container mx-auto px-4 text-center">
                    <div class="flex flex-col items-center gap-4">
                         <a href="#" class="flex items-center gap-3 text-gray-300 hover:text-white transition-colors">
                            <span class="text-sm font-semibold">Digital Menu Solution</span>
                        </a>
                        <p class="text-xs text-gray-400">&copy; ${new Date().getFullYear()} NA‡§à ‡§¨‡§π‡•Å. All Rights Reserved.</p>
                    </div>
                </div>
            </footer>
        `;
        // --- LOGIC FUNCTIONS ---
        
        function handleFilterMenu(category) {
            state.activeCategory = category;
            state.searchResults = null;
            state.searchQueryDisplay = '';
            state.showFavorites = false;
            renderApp();
        }
        
        function handleSearch(query) {
            const lowerCaseQuery = query.toLowerCase();
            state.searchQueryDisplay = query;
            state.searchResults = MENU.filter(item => 
                item.name.toLowerCase().includes(lowerCaseQuery) ||
                item.description.toLowerCase().includes(lowerCaseQuery) ||
                (item.searchTerms && item.searchTerms.some(term => term.toLowerCase().includes(lowerCaseQuery)))
            );
            state.isSearchOpen = false;
            renderApp();
        }
        
        function clearSearch() {
            state.searchResults = null;
            state.searchQueryDisplay = '';
            handleFilterMenu(state.activeCategory);
        }

        function toggleFavorite(itemId) {
            const index = state.favorites.indexOf(itemId);
            if (index === -1) {
                state.favorites.push(itemId);
            } else {
                state.favorites.splice(index, 1);
            }
            localStorage.setItem('favorites', JSON.stringify(state.favorites));
            renderApp();
        }

        function toggleFavoritesView() {
            state.showFavorites = !state.showFavorites;
            state.searchResults = null;
            state.searchQueryDisplay = '';
            renderApp();
        }

        function addToCart(itemId) {
            state.orderJustSent = false;
            const item = MENU.find(i => i.id === itemId);
            if (!item) return;

            const existingItem = state.cart[itemId];
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                state.cart[itemId] = { ...item, quantity: 1 };
            }
            
            state.lastAddedItem = item.name;
            state.notificationKey += 1;
            
            renderApp();

            setTimeout(() => {
                if (state.notificationKey === state.notificationKey) { 
                    state.lastAddedItem = null;
                    renderApp(); 
                }
            }, 3000);
        }
        
        function changeQuantity(itemId, change) {
            const item = state.cart[itemId];
            if (!item) return;
            item.quantity += change;
            if (item.quantity <= 0) {
                delete state.cart[itemId];
            }
            renderApp();
        }

        function triggerInstall() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                    state.isInstallable = false;
                    renderApp();
                });
            }
        }
        
        async function sendOrder() {
            const items = Object.values(state.cart);
            if (items.length === 0) {
                state.message = { text: 'Your cart is empty.', type: 'error' };
                renderApp();
                return;
            }
            if (!state.tableNumber) {
                state.message = { text: 'Please select a table number.', type: 'error' };
                renderApp();
                return;
            }

            document.getElementById('send-order-text').innerHTML = `
                <svg class="w-5 h-5 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>Sending...</span>
            `;
            document.getElementById('send-order-btn').disabled = true;

            const total = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const orderNumber = `NB-${Date.now().toString().slice(-6)}`;
            const orderTime = new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
            
            const orderData = {
                orderNumber,
                tableNumber: state.tableNumber,
                items,
                total,
                orderTime,
                timestamp: new Date().toISOString(),
            };
            
            try {
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    cache: 'no-cache',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(orderData),
                });
                
                state.message = { text: `Order ${orderNumber} for Table ${state.tableNumber} sent!`, type: 'success' };
                state.previousOrder = orderData;
                localStorage.setItem('previousOrder', JSON.stringify(orderData));
                state.cart = {};
                state.orderJustSent = true;
                
                triggerConfetti();

            } catch (error) {
                console.error('Error sending order:', error);
                state.message = { text: 'Thanku' };
            } finally {
                renderApp();
            }
        }


        // --- MAIN RENDER LOGIC ---

        function renderApp() {
            const cartCount = Object.values(state.cart).reduce((sum, item) => sum + item.quantity, 0);
            const favoritesCount = state.favorites.length;

            let filteredMenu = MENU;
            if (state.showFavorites) {
                filteredMenu = MENU.filter(item => state.favorites.includes(item.id));
            } else if (state.activeCategory !== 'All') {
                filteredMenu = MENU.filter(item => item.category === state.activeCategory);
            }

            root.innerHTML = `
                <div class="relative z-10 min-h-screen flex flex-col">
                    <div class="flex-grow">
                        ${AddToCartNotification({ itemName: state.lastAddedItem, key: state.notificationKey })}
                        ${Header({ tableNumber: state.tableNumber, cartCount, isInstallable: state.isInstallable, showFavorites: state.showFavorites, favoritesCount })}
                        <main class="container mx-auto px-2 sm:px-4 lg:px-8 mt-4 sm:mt-6 lg:mt-8 grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 text-white">
                            ${MenuSection({ activeCategory: state.activeCategory, searchResults: state.searchResults, searchQueryDisplay: state.searchQueryDisplay, filteredMenu, showFavorites: state.showFavorites, favorites: state.favorites })}
                            ${CartSidebar({ isOpen: state.isCartOpen, cart: state.cart, previousOrder: state.previousOrder, message: state.message, orderJustSent: state.orderJustSent })}
                        </main>
                    </div>
                    ${Footer()}
                    ${SearchModal({ isOpen: state.isSearchOpen })}
                    ${CategoryModal({ isOpen: state.isCategoryModalOpen, activeCategory: state.activeCategory })}
                    ${FloatingCategoryButton({ isVisible: state.isFloatingCategoryButtonVisible })}
                    ${FloatingCartButton({ isVisible: state.isFloatingCartButtonVisible, cartCount })}
                    ${ItemDetailModal({ item: state.selectedItem })}
                </div>
            `;
            
            attachEventListeners();

            if (state.message) {
                 setTimeout(() => {
                    state.message = null;
                    renderApp();
                 }, 5000);
            }
        }
        
        function initializeSliderAnimations() {
            const sliderItems = document.querySelectorAll('.category-slider-item');
            if (sliderItems.length === 0) return;

            sliderItems.forEach((item, index) => {
                item.style.transitionDelay = `${index * 100}ms`;
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                root: null,
                threshold: 0.2,
            });

            sliderItems.forEach(item => {
                observer.observe(item);
            });
        }

        function attachEventListeners() {
            // Header
            document.getElementById('table-number-select')?.addEventListener('change', e => {
                state.tableNumber = e.target.value;
            });
            document.getElementById('search-btn')?.addEventListener('click', () => {
                state.isSearchOpen = true;
                renderApp();
            });
            document.getElementById('cart-btn')?.addEventListener('click', () => {
                state.isCartOpen = !state.isCartOpen;
                renderApp();
            });
            document.getElementById('favorites-btn')?.addEventListener('click', () => {
                toggleFavoritesView();
            });
            document.getElementById('install-app-btn')?.addEventListener('click', triggerInstall);
            
            // Menu Section
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    addToCart(parseInt(btn.dataset.itemId));
                });
            });
            document.querySelectorAll('.favorite-toggle-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(parseInt(btn.dataset.itemId));
                });
            });
            document.querySelectorAll('.menu-item-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    // Only open detail modal if we didn't click favorite or add button
                    if (!e.target.closest('.favorite-toggle-btn') && !e.target.closest('.add-to-cart-btn')) {
                        const itemId = parseInt(card.dataset.itemId);
                        state.selectedItem = MENU.find(i => i.id === itemId);
                        renderApp();
                    }
                });
            });

            document.getElementById('clear-search-btn')?.addEventListener('click', clearSearch);
            document.getElementById('category-modal-trigger')?.addEventListener('click', () => {
                state.isCategoryModalOpen = true;
                renderApp();
            });
            document.getElementById('back-to-menu-btn')?.addEventListener('click', () => {
                state.showFavorites = false;
                renderApp();
            });

            // In-menu Category Slider
            document.querySelectorAll('.category-slider-item').forEach(item => {
                item.addEventListener('click', () => {
                    handleFilterMenu(item.dataset.category);
                });
            });
            initializeSliderAnimations();


            // Cart Sidebar
            document.getElementById('cart-close-btn')?.addEventListener('click', () => {
                state.isCartOpen = false;
                renderApp();
            });
            document.querySelectorAll('.quantity-change-btn').forEach(btn => {
                btn.addEventListener('click', () => changeQuantity(parseInt(btn.dataset.itemId), parseInt(btn.dataset.change)));
            });
            document.getElementById('send-order-btn')?.addEventListener('click', sendOrder);
            
            // Search Modal
            const searchModalOverlay = document.getElementById('search-modal-overlay');
            if (searchModalOverlay) {
                searchModalOverlay.addEventListener('click', () => {
                    state.isSearchOpen = false;
                    renderApp();
                });
                searchModalOverlay.querySelector('div').addEventListener('click', e => e.stopPropagation());
                document.getElementById('search-modal-close').addEventListener('click', () => {
                    state.isSearchOpen = false;
                    renderApp();
                });
                document.getElementById('perform-search-btn').addEventListener('click', () => {
                    const query = document.getElementById('search-input').value;
                    handleSearch(query);
                });
                document.getElementById('search-input').addEventListener('input', handleSearchInput);
                document.getElementById('clear-search-input-btn').addEventListener('click', () => {
                     document.getElementById('search-input').value = '';
                     handleSearchInput();
                });
                handleSearchInput();
            }

            // Category Modal
            const categoryModalOverlay = document.getElementById('category-modal-overlay');
            if(categoryModalOverlay) {
                categoryModalOverlay.addEventListener('click', () => {
                    state.isCategoryModalOpen = false;
                    renderApp();
                });
                categoryModalOverlay.querySelector('div').addEventListener('click', e => e.stopPropagation());
                document.getElementById('category-modal-close').addEventListener('click', () => {
                    state.isCategoryModalOpen = false;
                    renderApp();
                });
                document.querySelectorAll('.category-select-item').forEach(item => {
                    item.addEventListener('click', () => {
                        handleFilterMenu(item.dataset.category);
                        state.isCategoryModalOpen = false;
                    });
                });
            }

            // Item Detail Modal
            const itemDetailOverlay = document.getElementById('item-detail-overlay');
            if(itemDetailOverlay) {
                const closeModal = () => {
                    state.selectedItem = null;
                    renderApp();
                };
                itemDetailOverlay.addEventListener('click', closeModal);
                document.getElementById('item-detail-content').addEventListener('click', e => e.stopPropagation());
                document.getElementById('modal-close-btn').addEventListener('click', closeModal);
                document.querySelector('.modal-add-to-cart-btn')?.addEventListener('click', (e) => {
                    addToCart(parseInt(e.currentTarget.dataset.itemId));
                    closeModal();
                });
            }


            // Floating Buttons
            document.getElementById('floating-category-btn')?.addEventListener('click', () => {
                 state.isCategoryModalOpen = true;
                 renderApp();
            });
            document.getElementById('floating-cart-btn')?.addEventListener('click', () => {
                 state.isCartOpen = true;
                 renderApp();
            });
        }
        
        // Search Modal specific logic
        function handleSearchInput() {
            const searchInput = document.getElementById('search-input');
            if (!searchInput) return;

            const query = searchInput.value.toLowerCase();
            const contentEl = document.getElementById('search-content');
            if (!contentEl) return;
            
            if (query.length === 0) {
                contentEl.innerHTML = `
                    <div>
                        <h4 class="text-sm font-semibold text-gray-700 mb-2">Popular Searches:</h4>
                        <div class="flex flex-wrap gap-2">
                            ${popularSearches.map(term => `<span class="popular-search-tag inline-block bg-pink-100 text-pink-700 px-3 py-1 rounded-full text-sm font-medium cursor-pointer hover:bg-pink-200 transition-colors" data-term="${term}">${term}</span>`).join('')}
                        </div>
                    </div>
                `;
                document.querySelectorAll('.popular-search-tag').forEach(tag => {
                    tag.addEventListener('click', () => {
                        searchInput.value = tag.dataset.term;
                        handleSearchInput();
                    });
                });
                return;
            }

            if (query.length >= 2) {
                 const results = MENU.filter(item => 
                    item.name.toLowerCase().includes(query) ||
                    item.description.toLowerCase().includes(query) ||
                    (item.searchTerms && item.searchTerms.some(t => t.toLowerCase().includes(query)))
                );
                
                if (results.length > 0) {
                    contentEl.innerHTML = `
                        <div class="space-y-3">
                            ${results.map(item => `
                                <div class="flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-200 hover:border-pink-300 hover:shadow-sm transition-all duration-200">
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold royal-font text-[#A40046] text-base">${item.name}</div>
                                        <div class="text-xs text-gray-500 line-clamp-1">${item.description}</div>
                                    </div>
                                    <div class="font-bold text-gray-800 text-lg font-sans"><span class="text-sm align-middle">‚Çπ</span>${item.price}</div>
                                    <button class="modal-add-btn bg-[#A40046] text-white px-4 py-1.5 rounded-full text-xs font-semibold hover:bg-[#830038] transition transform hover:scale-105" data-item-id="${item.id}">Add</button>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    document.querySelectorAll('.modal-add-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            addToCart(parseInt(btn.dataset.itemId));
                            state.isSearchOpen = false;
                        });
                    });

                } else {
                    contentEl.innerHTML = `<p class="text-center text-gray-500 p-4">No results for "${query}"</p>`;
                }
            } else {
                 const suggestions = searchSuggestions.filter(s => s.toLowerCase().includes(query)).slice(0, 8);
                 if (suggestions.length > 0) {
                    contentEl.innerHTML = `
                        <div class="border-t pt-2">
                             ${suggestions.map(s => `<div class="suggestion-item p-3 flex items-center gap-3 rounded-lg hover:bg-gray-50 cursor-pointer" data-term="${s}">
                                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                <span class="text-gray-700">${s.replace(new RegExp(query, 'gi'), `<span class="font-bold text-pink-700">$&</span>`)}</span>
                             </div>`).join('')}
                        </div>
                    `;
                    document.querySelectorAll('.suggestion-item').forEach(item => {
                        item.addEventListener('click', () => {
                            searchInput.value = item.dataset.term;
                            handleSearchInput();
                        });
                    });
                 } else {
                    contentEl.innerHTML = '';
                 }
            }
        }
        
        // --- INITIALIZATION ---
        
        function main() {
            // Initial Splash Screen
            root.innerHTML = SplashScreen();
            setTimeout(() => {
                state.showSplash = false;
                renderApp();
            }, 2000);
            
            // Scroll listener for floating buttons
            window.addEventListener('scroll', () => {
                const shouldBeVisible = window.scrollY > 200;
                if (state.isFloatingCategoryButtonVisible !== shouldBeVisible || state.isFloatingCartButtonVisible !== shouldBeVisible) {
                    state.isFloatingCategoryButtonVisible = shouldBeVisible;
                    state.isFloatingCartButtonVisible = shouldBeVisible;
                    renderApp();
                }
            });
        }
        
        main();

    </script>
    <script type="module" src="/index.tsx"></script>
</body>
</html>
    
